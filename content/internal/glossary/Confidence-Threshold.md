+++
title = "Confidence Threshold"
translationKey = "confidence-threshold"
description = "Минималната оценка, която един AI модел трябва да постигне, за да се приеме, че предсказанието е коректно; действа като праг на надеждност и определя дали дадено предсказание ще бъде използвано или прегледано."
keywords = ["confidence threshold", "AI модел", "машинно обучение", "confidence score", "надеждност на предсказанията"]
category = "AI Chatbot & Automation"
type = "glossary"
date = 2025-12-02
draft = false
url = "/internal/glossary/Confidence-Threshold/"

+++
## Какво е Confidence Threshold?

**Confidence threshold** е конфигурируем прагова стойност, която контролира дали предсказанието на машинно обучаващ се модел се приема като надеждно за последващи действия, или се отхвърля, маркира или ескалира за допълнителен преглед. Всяко предсказание, генерирано от AI модел, обикновено е придружено от **confidence score** — числова стойност (обикновено между 0 и 1, или 0% до 100%), която показва степента на сигурност на модела в своето предсказание. Прагът действа като филтър: **само предсказания с confidence score, равна или по-висока от този праг, се считат за достатъчно надеждни, за да се предприемат действия**.

Например, при откриване на измами, ако моделът даде оценка за измама 0.96 на транзакция, а прагът е 0.95, транзакцията се блокира. Ако оценката е 0.90, транзакцията може само да бъде маркирана за ръчен преглед.

- [Microsoft Documentation: Confidence score](https://learn.microsoft.com/en-us/azure/ai-services/language-service/question-answering/concepts/confidence-score)
- [Ultralytics: Confidence Score in AI/ML Explained](https://www.ultralytics.com/glossary/confidence)
- [Zendesk: About confidence thresholds for advanced AI agents](https://support.zendesk.com/hc/en-us/articles/8357749625498-About-confidence-thresholds-for-advanced-AI-agents)


## Как се изчисляват Confidence Scores?

Confidence score се генерират от изходния слой на машинно обучаващ се модел и представят сигурността на модела по отношение на дадено предсказание. Методът за изчисление зависи от архитектурата на модела и конкретната задача:

- **Softmax (мултикласова класификация):** Генерира разпределение на вероятностите между всички възможни класове. Например, класификатор на изображения може да изведе `[cat: 0.92, dog: 0.06, rabbit: 0.02]` — моделът е 92% сигурен, че на изображението има котка.
- **Sigmoid (бинарна класификация):** Давa вероятност (0–1) входът да принадлежи към положителния клас.
- **Logits:** Необработени, ненормализирани изходни стойности от модела, които обикновено се трансформират чрез активационни функции (като softmax или sigmoid) в вероятности.

Технически източници:
- [Ultralytics: Activation Function](https://www.ultralytics.com/glossary/activation-function)
- [Wikipedia: Sigmoid Function](https://en.wikipedia.org/wiki/Sigmoid_function)
- [Ultralytics: Softmax Function](https://www.ultralytics.com/glossary/softmax)


## Видове Confidence Scores

| Тип                           | Обхват / Формат           | Предимства                                  | Недостатъци                              |
|-------------------------------|---------------------------|----------------------------------------------|------------------------------------------|
| Непрекъснат (напр. 0–1, 0–100%) | Десетична или процентна    | Интуитивни, прецизни, математически коректни | Най-високата стойност ≠ винаги вярно     |
| Logit (сурови стойности)      | -∞ до +∞                  | Полезни в сложни процеси, детайлни           | Не са разбираеми за хората               |
| Дискретен (low/med/high)      | Категориен                | Лесен за бизнес правила, разбираем           | Липсва детайлност, не е математически точен |

**Техническа бележка:**  
Непрекъснатите и logit стойности могат да се конвертират чрез sigmoid или softmax функции, но прецизността може да се ограничи поради ограничения на floating point ([Mindee](https://www.mindee.com/blog/how-use-confidence-scores-ml-models)).


## Защо са важни Confidence Thresholds?

### Бизнес и безопасност

- **Управление на риска:** В банкиране, здравеопазване или автономни превозни средства, цената на грешно предсказание може да е сериозна — напр. одобряване на измамна транзакция, грешна диагноза, пропуснато препятствие.
- **Оперативна ефективност:** Препоръчващи системи в електронна търговия с по-висок праг увеличават конверсиите, като показват само артикули с висока сигурност, докато ниска сигурност може да дразни потребителите.
- **Автоматизация vs. човешки преглед:** Прагът определя кога да се автоматизира и кога да се ескалира към човешки оператор за по-нататъчно решение ([Zendesk](https://support.zendesk.com/hc/en-us/articles/8357749625498-About-confidence-thresholds-for-advanced-AI-agents)).

**Аналогия:** Високият confidence score на модела сигнализира готовност за действие, подобно на човек, който изразява сигурност преди да вземе решение. Прагът е стандартът за необходимата сигурност преди действие.


## Разлика между Confidence, Accuracy, Precision и Recall

| Метрика    | Какво измерва                                      | Примерна употреба         | Формула                           |
|------------|----------------------------------------------------|---------------------------|-----------------------------------|
| Confidence | Сигурност в *това* предсказание                    | „Това е котка: 92%“       | Изход на модела за всеки случай   |
| Accuracy   | Обща коректност на всички предсказания             | „Моделът е 90% точен върху тест сет“ | (TP + TN) / (TP + TN + FP + FN)  |
| Precision  | % от положителните предсказания, които са верни    | Минимизиране на фалшиви аларми | TP / (TP + FP)                   |
| Recall     | % от реалните положителни, които са коректно идентифицирани | Да не се пропускат събития | TP / (TP + FN)                   |

- **TP:** Истински положителни  
- **FP:** Фалшиво положителни  
- **TN:** Истински отрицателни  
- **FN:** Фалшиво отрицателни

**Ключово:**  
Повишаването на прага увеличава precision (по-малко фалшиви положителни), но намалява recall (повече пропуснати положителни). Намаляването на прага води до обратното.

- [Ultralytics: Confidence Score in AI/ML Explained](https://www.ultralytics.com/glossary/confidence)
- [Leverege: Computer Vision Basics](https://www.leverege.com/blogpost/computer-vision-basics-how-confidence-accuracy-and-thresholds-impact-performance)


## Как да настроим и оптимизираме Confidence Thresholds

### Стъпка по стъпка

1. **Анализ на разпределението на данните**
   - Визуализирайте confidence score на модела (например хистограма на изходите).
   - Идентифицирайте естествени прагове или клъстери.

2. **Задайте начален праг**
   - Започнете със стандартен (например 0.5 за бинарна класификация).
   - За високорискови области започнете по-високо (например 0.9).

3. **Тествайте и итератирайте**
   - Оценете [precision и recall](/en/glossary/precision-and-recall/) при различни прагове.
   - Използвайте *Precision-Recall (PR) криви* за визуализация на компромисите.
   - Настройте според бизнес нуждите, толеранса към риск или регулаторни изисквания.

4. **Мониторирайте и адаптирайте**
   - Непрекъснато следете представянето на модела.
   - Коригирайте прага, ако се промени данните или бизнес целите.

**Microsoft Learn** препоръчва избор на праг според желания баланс между точност (повишете прага за по-висок precision, по-ниско покритие) и покритие (намалете прага, за да отговаря на повече, но с риск от повече фалшиви положителни):  
[Microsoft: Choose a score threshold](https://learn.microsoft.com/en-us/azure/ai-services/language-service/question-answering/concepts/confidence-score)

### Визуализация на ефекта от прага: Precision-Recall крива

**PR крива** изобразява precision срещу recall при различни стойности на прага. Тя помага да се избере праг, който балансира приоритетите.

![PR крива](https://cdn.prod.website-files.com/67ea47febc0b1c768efbabd5/67f88fa1d3c87b539c680055_673da21d7542acff24318de9_673da16c4a6bfb21cdade3f8_curve-precision-recall.png)
*Източник: [Mindee](https://www.mindee.com/blog/how-use-confidence-scores-ml-models)*


### Пример с код: Приложение на Confidence Threshold в Python

#### Компютърно зрение (Ultralytics YOLO)

```python
from ultralytics import YOLO

model = YOLO("yolo11n.pt")
# Задържа само детекции с confidence ≥ 0.6
results = model.predict("bus.jpg", conf=0.6)
print(f"Открити са {len(results[0].boxes)} обекта с висока сигурност.")
```
*Източник: [Ultralytics](https://www.ultralytics.com/glossary/confidence)*

#### Общ случай: Бинарна класификация

```python
import numpy as np

def apply_confidence_threshold(predictions, threshold=0.7):
    return [1 if p >= threshold else 0 for p in predictions]

predictions = [0.82, 0.67, 0.91, 0.48]
labels = apply_confidence_threshold(predictions, threshold=0.8)
# Резултат: [1, 0, 1, 0]
```


## Реални приложения и примери

### Компютърно зрение

#### Откриване на дефекти в производството
- **Сценарий:** Модел за визуална инспекция предсказва дефект с confidence 0.82.
- **Праг:** Зададен на 0.80, продуктът се изпраща за ръчен преглед; под 0.80, преминава.
- **Компромис:** По-висок праг = по-малко фалшиви аларми, но риск от пропускане на реални дефекти.

#### Откриване на обекти за безопасност
- **Автономни превозни средства:** Само препятствия, открити с висока сигурност, предизвикват спиране. С ниска сигурност се прави кръстосана проверка с други сензори.

### Чатботи и AI агенти

#### Съпоставяне на намерения (Zendesk)
- **Сценарий:** Чатбот предсказва потребителско намерение със различни confidence стойности.
- **Праг:** По подразбиране 60% (0.6); повечето потребители избират 50–70%.
- **Резултат:** На или над прага чатботът отговаря; под прага — препраща или ескалира.

### Обработка на документи

#### Optical Character Recognition (OCR)
- **Сценарий:** AI извлича дати от фактури с confidence score.
- **Праг:** Само дати с confidence над 0.85 се попълват автоматично; останалите се маркират за преглед.

### Диагностика в здравеопазването

- **Сценарий:** AI маркира аномалии на рентгенови снимки с confidence scores.
- **Праг:** Открития с висока сигурност се приоритизират за спешен преглед; с по-ниска сигурност — за „втори поглед“.

### Финансови услуги

#### Откриване на измами
- **Сценарий:** Моделът оценява транзакция с 0.94 вероятност за измама.
- **Праг:** Банката задава праг 0.95 — транзакцията се допуска, но се маркира. Ако е 0.97 — блокира се и клиентът се уведомява.


## Настройване на прага: компромиси

| Ниво на праг         | Precision           | Recall                | Пример на приложение                      |
|----------------------|---------------------|-----------------------|-------------------------------------------|
| Нисък (<0.5)         | Нисък               | Висок                 | Откриване на всички възможни дефекти (производство) |
| Балансиран (0.7–0.8) | Умерен              | Умерен                | Общи препоръчващи системи                 |
| Висок (>0.9)         | Висок               | Нисък                 | Медицинска диагностика, блокиране на измами|

**Ключово:**  
- **Повишаването на прага** намалява фалшивите положителни (повече precision), но увеличава пропуснатите положителни (по-нисък recall).
- **Намаляването на прага** води до обратното.


## Най-добри практики, чести грешки и съображения

### Най-добри практики
- **Калибриране на оценките:** Използвайте техники като Platt scaling или изотонична регресия за съответствие между confidence score и действителните вероятности.
- **Постоянен мониторинг:** Данните могат да се променят; прагът трябва периодично да се преразглежда.
- **Съобразете с бизнес контекста:** Изберете праг според цената на грешките във вашата сфера.
- **Човек в процеса:** Граничните предсказания ескалират за ръчен преглед.

### Чести грешки
- **Твърде висок праг:** Може да се изпуснат валидни предсказания (нисък recall), по-малко покритие.
- **Твърде нисък праг:** Увеличава риска от действия върху грешни предсказания (нисък precision).
- **Игнориране на калибрацията:** Некоректно калибрирани оценки могат да доведат до грешни решения.
- **Статични прагове:** Липса на адаптация при промяна на данните, нуждите или производителността на модела.

### Специални съображения
- **Регулаторно съответствие:** В някои сфери се изискват одитируеми, обясними прагове ([Iterate.ai](https://www.iterate.ai/ai-glossary/confident-thresholding)).
- **Дисбаланс на класовете:** Настройвайте прага при редки събития (напр. редки заболявания, измами).
- **Ансамблови модели:** Често дават по-добри калибрирани confidence оценки.


## Advanced: Отвъд Confidence Thresholds

- **Многостъпкова валидация:** В производството ниско confidence откритие може да задейства допълнителна инспекция или алтернативни сензори.
- **Темпорален/контекстуален анализ:** При времеви редове или видео — агрегиране на confidence през кадри.
- **Хибридни системи:** Комбинират AI предсказания с rule-based проверки за критични приложения.


## Примерни use cases

| Индустрия       | Приложение                  | Типичен праг   | Бележки                                                   |
|-----------------|-----------------------------|---------------|-----------------------------------------------------------|
| Банкиране       | Откриване на измами         | 0.90 – 0.99   | По-висок риск = по-висок праг; ръчен преглед под прага    |
| Здравеопазване  | Медицински изображения      | 0.85 – 0.95   | Ескалиране на случаите с ниска сигурност към специалисти  |
| Производство    | Инспекция за дефекти        | 0.70 – 0.85   | Минимизиране на пропуски; ръчен преглед над прага         |
| Е-търговия      | Препоръки за продукти       | 0.60 – 0.80   | По-ниски за широки предложения, по-високи за скъпи грешки |
| Обслужване на клиенти | Съпоставяне на намерения чатбот | 0.50 – 0.70   | Баланс между полезност и точност ([Zendesk](https://support.zendesk.com/hc/en-us/articles/8357749625498-About-confidence-thresholds-for-advanced-AI-agents)) |



## Основни изводи

- Confidence threshold е основният "портар" за автоматизираните решения в AI/ML процеси.
- Настройването на прага е постоянен, контекстуално зависим процес между [precision и recall](/en/glossary/precision-and-recall/).
- Бизнесите трябва да определят прага според риска, регулациите и оперативните нужди — и винаги да следят ефективността.
- Визуализирайте метрики (напр. PR криви), калибрирайте оценките и включвайте човешки фактор за безопасна и ефективна автоматизация.


## Допълнителна литература и източници

- [Mindee: How to Use Confidence Scores in ML Models](https://www.mindee.com/blog/how-use-confidence-scores-ml-models)
- [Zendesk: About confidence thresholds for advanced AI agents](https://support.zendesk.com/hc/en-us/articles/8357749625498-About-confidence-thresholds-for-advanced-AI-agents)
- [Ultralytics: Confidence Score in AI/ML Explained](https://www.ultralytics.com/glossary/confidence)
- [Leverege: Computer Vision Basics](https://www.leverege.com/blogpost/computer-vision-basics-how-confidence-accuracy-and-thresholds-impact-performance)
- [Iterate.ai: Confident Thresholding](https://www.iterate.ai/ai-glossary/confident-thresholding)
- [Microsoft Learn: Confidence score](https://learn.microsoft.com/en-us/azure/ai-services/language-service/question-answering/concepts/confidence-score)

За подробни ръководства, визуализации и практически примери разгледайте посочените източници.


*Confidence thresholds балансират автоматизацията и риска — избирайте и настройвайте внимателно според приложението си. За още визуални обяснения, практически уроци и актуални ръководства, вижте връзките и източниците в този глосар.*