---
title: ロードバランシング
date: '2025-12-19'
lastmod: '2025-12-19'
translationKey: load-balancing
description: ロードバランシングについて学ぶ：アプリケーションの可用性、信頼性、パフォーマンスを最適化するために、ネットワークトラフィックを複数のサーバーに分散する技術。AIインフラストラクチャにおける種類、アルゴリズム、メリットを解説します。
keywords:
- ロードバランシング
- ロードバランサー
- ネットワークトラフィック
- サーバースケーラビリティ
- アプリケーションパフォーマンス
category: AI Infrastructure & Deployment
type: glossary
draft: false
e-title: Load Balancing
term: ろーどばらんしんぐ
url: "/ja/glossary/load-balancing/"
aliases:
- "/ja/glossary/Load-Balancing/"
---
## ロードバランシングとは?
ロードバランシングとは、受信するネットワークまたはアプリケーショントラフィックを複数のバックエンドサーバー(サーバーファームまたはプール)に対して、単一のサーバーに負荷が集中しないよう、インテリジェントに分散するプロセスです。ロードバランサーは、クライアントリクエストを受信し、アルゴリズムとリアルタイムのサーバーヘルスデータを使用して各リクエストを最適なサーバーにルーティングする中央ゲートウェイとして機能することで、アプリケーションの可用性、信頼性、パフォーマンスを最適化します。

現代のアプリケーション、特にAI駆動型サービス、高トラフィックのウェブサイト、クラウドネイティブワークロードは、最小限のレイテンシと最大限のアップタイムで数百万の同時リクエストを処理する必要があります。ロードバランシングがなければ、単一のサーバーがボトルネックとなり、速度低下、障害、ユーザーエクスペリエンスの低下につながります。ロードバランシングは、変動する負荷条件下でも、スムーズなスケーリング、フォールトトレランス、一貫したパフォーマンスを保証します。

## ロードバランシングが重要な理由

**高可用性:** サーバーに障害が発生した場合、ロードバランサーは自動的にトラフィックを正常なサーバーに再ルーティングし、サービスの継続性を維持します。段階的なトラフィックシフトにより、ゼロダウンタイムデプロイメントが可能になります。

**レジリエンスと災害復旧:** 地域的な障害やデータセンターの障害が発生した場合、地理的な場所間でトラフィックを再ルーティングすることで災害復旧をサポートします。

**スケーラビリティ:** 需要に合わせてサーバーを簡単に追加または削除でき、計画的な成長と突発的なトラフィックスパイクの両方に対応します。水平スケーリングがシームレスになります。

**一貫したユーザーエクスペリエンス:** バックエンドサーバーの負荷分散に関係なく、応答時間を最小化し、予測可能なパフォーマンスを保証します。

**リソースの最適化:** 利用可能なリソース全体にワークロードを均等に分散することで、既存のインフラストラクチャの利用率を最大化します。

**セキュリティの強化:** 追加のセキュリティレイヤーとして機能し、バックエンドインフラストラクチャを隠蔽し、ロードバランサーでのSSL/TLS終端を可能にします。

## コアコンポーネントとアーキテクチャ

### ハードウェアロードバランサー vs ソフトウェアロードバランサー

**ハードウェアロードバランサー:** 高スループットと信頼性のために構築された物理ネットワークアプライアンスで、通常はオンプレミスのデータセンターに展開されます。SSL/TLSオフロード、高度なヘルスチェック、レイヤー4/7トラフィック管理などの機能を提供します。大きな設備投資が必要ですが、確定的なパフォーマンスを提供します。

**例:** F5 BIG-IP、Kemp LoadMaster、Citrix ADC

**利点:** 専用ハードウェア、予測可能なパフォーマンス、専門的な処理
**欠点:** 高い初期コスト、柔軟性の制限、メンテナンスオーバーヘッド

**ソフトウェアロードバランサー:** 汎用ハードウェア、仮想マシン、またはクラウドマネージドサービスとして実行されるソフトウェアとして実装されます。柔軟性、迅速なスケーリング、KubernetesやOpenShiftなどの自動化フレームワークとの深い統合を提供します。

**例:** NGINX Plus、HAProxy、AWS Elastic Load Balancing、Traefik

**利点:** コスト効率が高い、柔軟な展開、簡単な更新
**欠点:** 共有リソース、パフォーマンスの変動の可能性

### リクエストルーティングプロセス

**リクエスト受信:** ロードバランサーは、単一のエントリポイント(IPアドレスまたはDNS名)でクライアントリクエストを受信します。

**ヘルスチェック評価:** TCPピング、HTTPプローブ、またはアプリケーションレベルのヘルスチェックを通じて、バックエンドサーバーのヘルスを継続的に監視します。

**サーバー選択:** 現在の状態に基づいて、設定されたアルゴリズム(ラウンドロビン、最小接続数など)を適用して最適なバックエンドサーバーを選択します。

**リクエスト転送:** 選択されたサーバーにリクエストをルーティングし、必要に応じてヘッダーを変更または変換を適用します。

**レスポンス処理:** バックエンドからレスポンスを受信し、オプションでキャッシュまたは変更してから、クライアントに返します。

**セッション管理:** アプリケーションで必要な場合、セッション永続性(スティッキーセッション)を維持します。

### ヘルスチェックとフェイルオーバー

ロードバランサーは継続的なヘルス監視を実行します:

**アクティブヘルスチェック:** 定期的な間隔(例:5秒ごとに/healthへのHTTP GET)でバックエンドにテストリクエストを積極的に送信します。

**パッシブヘルスチェック:** 実際のトラフィックを監視し、エラー率やタイムアウトに基づいてサーバーを異常としてマークします。

**障害検出:** サーバーがヘルスチェックに失敗した場合(例:3回連続の失敗)、アクティブプールから削除されます。

**自動復旧:** サーバーが再びヘルスチェックに合格すると、自動的にローテーションに復帰します。

**グレースフルデグラデーション:** 部分的な障害時には、ロードバランサーは運用チームに警告しながら、正常なサーバーからサービスを継続します。

## ロードバランサーの種類

### OSIレイヤー別

**レイヤー4(トランスポート層)ロードバランサー:** TCP/UDP情報(IPアドレス、ポート)に基づいてトラフィックをルーティングします。高速で効率的ですが、ルーティングインテリジェンスは限定的です。シンプルな分散を必要とする高パフォーマンス、低レイテンシのワークロードに最適です。

**ユースケース:** データベース接続、汎用TCPサービス、UDPアプリケーション
**利点:** 高スループット、低レイテンシ、プロトコル非依存
**欠点:** 限定的なルーティングインテリジェンス、アプリケーションデータの検査不可

**レイヤー7(アプリケーション層)ロードバランサー:** HTTPヘッダー、URL、Cookie、またはアプリケーション固有のデータに基づいてルーティングします。コンテンツに基づく高度なルーティングルールを可能にします。

**ユースケース:** Webアプリケーション、APIゲートウェイ、マイクロサービス
**利点:** コンテンツベースのルーティング、SSL終端、アプリケーション認識
**欠点:** L4よりも高いレイテンシ、よりリソース集約的

### デプロイメントモデル別

**グローバルサーバーロードバランサー(GSLB):** DNSベースのルーティングを使用して、地理的な場所とデータセンター間でトラフィックを分散します。災害復旧とグローバルアプリケーションに不可欠です。

**ユースケース:** マルチリージョンデプロイメント、災害復旧、地理的最適化
**機能:** DNSベースのルーティング、リージョン間のヘルス監視、レイテンシベースの決定

**ハードウェアロードバランサー:** 確定的なパフォーマンスを必要とするエンタープライズデータセンター向けの物理アプライアンス。

**ソフトウェアロードバランサー:** 標準インフラストラクチャ上で実行される柔軟なクラウドネイティブソリューション。

**仮想ロードバランサー:** VMまたはコンテナ内で実行され、Kubernetesなどのオーケストレーションプラットフォームと統合されます。

**エラスティックロードバランサー:** 需要に応じて自動的にスケールするクラウドネイティブサービス(AWS ELB、Azure Load Balancer、Google Cloud Load Balancing)。

## ロードバランシングアルゴリズム

### 静的アルゴリズム

**ラウンドロビン:** サーバーを順番に循環し、各リクエストをリスト内の次のサーバーに割り当てます。同等の容量を持つサーバーに対してシンプルで効果的です。

**重み付きラウンドロビン:** 重みに基づいて、より高い容量のサーバーにより多くのリクエストを割り当てます。重み3のサーバーは、重み1のサーバーの3倍のトラフィックを受信します。

**IPハッシュ:** クライアントIPアドレスをハッシュ化して、同じクライアントを一貫して同じサーバーにルーティングします。自然なセッション永続性を提供します。

### 動的アルゴリズム

**最小接続数:** アクティブな接続数が最も少ないサーバーにルーティングします。リクエスト期間が変動するアプリケーションに最適です。

**重み付き最小接続数:** 最小接続数とサーバー容量の重み付けを組み合わせます。

**最小応答時間:** 平均応答時間が最も低く、接続数が最も少ないサーバーにリクエストを送信します。ユーザーが認識するパフォーマンスを最適化します。

**リソースベース(エージェントベース):** サーバーが報告するメトリクス(CPU、メモリ、ディスク)を使用してトラフィックを動的にルーティングします。バックエンドにエージェントソフトウェアが必要です。

**コンシステントハッシング:** サーバーとクライアントをハッシュリングにマッピングし、サーバーの追加または削除時の中断を最小限に抑えます。分散キャッシングで人気があります。

**2つのランダム選択のパワー:** ランダムに2つのサーバーを選択し、負荷の少ない方にリクエストをルーティングします。最小限のオーバーヘッドで驚くほど効果的です。

### 高度なアルゴリズム

**リージョン別ウォーターフォール:** 容量に達するまでプライマリリージョンにトラフィックを送信し、その後セカンダリリージョンにオーバーフローします。

**スプレー分散:** 利用可能なすべてのリージョンまたはゾーンにトラフィックを均等に分散します。

**適応型アルゴリズム:** 履歴データから最適なルーティングパターンを学習する機械学習ベースのアプローチ。

## 主な利点

### 可用性と信頼性

**ゼロダウンタイムデプロイメント:** サービスの中断なしに更新中にトラフィックを段階的にシフトします。

**自動フェイルオーバー:** 数秒で障害が発生したサーバーを検出し、回避してルーティングします。

**ヘルス監視:** バックエンドの可用性とパフォーマンスの継続的な検証。

### スケーラビリティとパフォーマンス

**水平スケーリング:** アプリケーションの変更なしに、増加した負荷を処理するためにサーバーを追加します。

**オートスケーリング統合:** クラウドオートスケーリングと連携して、容量を需要に合わせます。

**パフォーマンス最適化:** 最速または最も近いサーバーにリクエストをルーティングします。

### セキュリティ

**SSL/TLS終端:** 暗号化/復号化をロードバランサーにオフロードし、バックエンドサーバーの負荷を軽減します。

**DDoS保護:** 攻撃トラフィックを複数のサーバーに吸収して分散します。

**Webアプリケーションファイアウォール統合:** 悪意のあるリクエストがバックエンドに到達する前にフィルタリングします。

**バックエンドの難読化:** 外部クライアントからバックエンドサーバーの詳細を隠します。

## 一般的なユースケース

### Eコマースプラットフォーム

**課題:** セールイベント中のトラフィックスパイクを処理し、ショッピングカートの状態を維持します。

**ソリューション:** Cookieベースのセッション永続性を持つレイヤー7ロードバランシング。トラフィックパターンに基づくバックエンドサーバーのオートスケーリング。

**利点:** 10倍のトラフィックスパイク中もサービスを維持し、リクエスト間でカートの永続性を保証します。

### ストリーミングサービス

**課題:** グローバルなオーディエンスに対して、最小限のバッファリングでメディアコンテンツを配信します。

**ソリューション:** ユーザーを最寄りのエッジロケーションにルーティングする地理的ロードバランシング。コンテンツキャッシングのためのCDN統合。

**利点:** レイテンシの削減、ストリーミング品質の向上、帯域幅コストの削減。

### AI推論API

**課題:** 低レイテンシの予測のために、GPUサーバー間で推論リクエストを分散します。

**ソリューション:** GPU可用性監視を伴う最小接続数アルゴリズム。効率的なリソース使用のための接続プーリング。

**利点:** 最適なGPU利用率、一貫した推論レイテンシ、自動フェイルオーバー。

### マイクロサービスアーキテクチャ

**課題:** Kubernetes内で動的にスケーリングするサービスインスタンス間でリクエストをルーティングします。

**ソリューション:** インテリジェントなルーティング、サーキットブレーキング、リトライロジックを備えたサービスメッシュ統合。

**利点:** レジリエントなサービス間通信、自動サービスディスカバリー、トラフィックシェーピング。

## 実装のベストプラクティス

**シンプルなアルゴリズムから始める:** ラウンドロビンまたは最小接続数から始めます。必要な場合にのみ複雑さを追加します。

**包括的なヘルスチェックを実装する:** TCP接続性だけでなく、実際のサービス機能を検証するアプリケーションレベルのヘルスエンドポイントを使用します。

**適切なタイムアウトを設定する:** 遅いバックエンドが全体的なサービスを低下させないように、接続、読み取り、書き込みのタイムアウトを設定します。

**アクセスログを有効にする:** トラブルシューティング、セキュリティ分析、容量計画のためにすべてのリクエストをログに記録します。

**主要メトリクスを監視する:** リクエストレート、エラーレート、応答時間、バックエンドヘルスステータスを継続的に追跡します。

**障害に備える:** フェイルオーバーシナリオを定期的にテストします。容量が削減された状態でもシステムが許容可能に動作することを確認します。

**レート制限を実装する:** ロードバランサーでリクエストレート制限を行い、バックエンドを過負荷から保護します。

**接続プーリングを使用する:** バックエンドへの永続的な接続を維持して、接続オーバーヘッドを削減します。

**圧縮を有効にする:** ロードバランサーでレスポンスを圧縮して、帯域幅を削減し、クライアントパフォーマンスを向上させます。

**定期的な容量計画:** トレンドを監視し、制限に達する前にインフラストラクチャのスケーリングを計画します。

## プラットフォーム固有のソリューション

### AWS Elastic Load Balancing

**Application Load Balancer (ALB):** 高度なルーティング機能を備えたHTTP/HTTPS用のレイヤー7ロードバランシング。

**Network Load Balancer (NLB):** 超高性能と静的IPアドレスのためのレイヤー4ロードバランシング。

**Gateway Load Balancer:** サードパーティ仮想アプライアンス用のレイヤー3ロードバランシング。

### Google Cloud Load Balancing

**グローバルロードバランシング:** 自動フェイルオーバーを備えた単一のエニーキャストIPでグローバルにトラフィックを提供します。

**リージョナルロードバランシング:** 単一リージョンデプロイメント用の低レイテンシオプション。

**内部ロードバランシング:** 内部サービス通信用のプライベートロードバランシング。

### Azure Load Balancer

**Azure Load Balancer:** 高可用性を備えたレイヤー4ロードバランシング。

**Azure Application Gateway:** WAF統合を備えたレイヤー7ロードバランシング。

**Azure Front Door:** CDN機能を備えたグローバルHTTPロードバランシング。

### オープンソースソリューション

**NGINX Plus:** 高度な機能、サポート、監視を備えた商用バージョン。

**HAProxy:** 広範な設定オプションを備えた高性能レイヤー4/7ロードバランサー。

**Traefik:** コンテナ用の自動サービスディスカバリーを備えたクラウドネイティブロードバランサー。

## パフォーマンスに関する考慮事項

**スループット:** ハードウェアロードバランサーは10〜100 Gbpsを処理します。ソフトウェアロードバランサーは通常、インスタンスあたり1〜10 Gbpsを処理します。

**レイテンシ:** レイヤー4は1ミリ秒未満のレイテンシを追加します。レイヤー7は処理の複雑さに応じて1〜5ミリ秒を追加します。

**接続制限:** ハードウェアアプライアンスは1000万以上の同時接続をサポートします。ソフトウェアソリューションは通常、インスタンスあたり10万〜100万をサポートします。

**SSL/TLSパフォーマンス:** 専用ハードウェアアクセラレータは1秒あたり1万〜10万のTLSハンドシェイクを処理します。ソフトウェアソリューションは1秒あたり1000〜1万を達成します。

## 監視とトラブルシューティング

**監視すべき主要メトリクス:**
- リクエストレート(リクエスト/秒)
- エラーレート(4xx、5xxレスポンス)
- 応答時間パーセンタイル(P50、P95、P99)
- バックエンドヘルスステータス
- 接続数(アクティブ、アイドル)
- SSL/TLSハンドシェイクレート

**一般的な問題:**
- 不均等なトラフィック分散
- セッション永続性の破損
- ヘルスチェックの設定ミス
- SSL証明書の期限切れ
- バックエンドサーバーの過負荷

## 参考文献

- [IBM: What Is Load Balancing?](https://www.ibm.com/think/topics/load-balancing)
- [AWS: What is Load Balancing?](https://aws.amazon.com/what-is/load-balancing/)
- [AWS Elastic Load Balancing](https://aws.amazon.com/elasticloadbalancing/)
- [Kemp: What Is Load Balancing](https://kemptechnologies.com/what-is-load-balancing)
- [F5: What Is a Load Balancer?](https://www.f5.com/glossary/load-balancer)
- [F5 BIG-IP](https://www.f5.com/products/big-ip-services.html)
- [Google Cloud Load Balancing](https://cloud.google.com/load-balancing)
- [Google Cloud Load Balancing Overview](https://docs.cloud.google.com/load-balancing/docs/load-balancing-overview)
- [Google Cloud Health Check Concepts](https://cloud.google.com/load-balancing/docs/health-check-concepts)
- [Google Cloud Service Mesh: Advanced Load Balancing](https://docs.cloud.google.com/service-mesh/docs/service-routing/advanced-load-balancing-overview)
- [Loadbalancer.org: Layer 4 vs Layer 7](https://www.loadbalancer.org/blog/comparing-layer-4-layer-7-and-gslb-load-balancing-techniques/)
- [Kemp: Round Robin Load Balancing](https://kemptechnologies.com/load-balancer/round-robin-load-balancing)
- [Kemp: Weighted Round Robin](https://kemptechnologies.com/load-balancer/weighted-round-robin-load-balancing)
- [Kemp: Least Connections](https://kemptechnologies.com/load-balancer/least-connections-load-balancing)
- [Kemp: Load Balancing Algorithms](https://kemptechnologies.com/load-balancer/load-balancing-algorithms-techniques)
- [NGINX: Load Balancing](https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/)
- [HAProxy Official Site](https://www.haproxy.org/)
- [Kubernetes Service Load Balancing](https://kubernetes.io/docs/concepts/services-networking/service/)
