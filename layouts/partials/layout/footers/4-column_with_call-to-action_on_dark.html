{{/*
@component: 4-Column Footer with CTA on Dark Background
@description: A comprehensive footer with a call-to-action section, 4-column navigation links, social media icons, and copyright information on a dark background.
@params:
  - bgColor: Background color (optional, default: "bg-gray-900")
  - borderColor: Border color (optional, default: "border-white/10")
  - ctaTagline: Call to action tagline text (optional, default: "Get started")
  - ctaTaglineColor: CTA tagline color (optional, default: "text-indigo-400")
  - ctaHeading: CTA heading text (optional, default: "Boost your productivity. Start using our app today.")
  - ctaHeadingColor: CTA heading color (optional, default: "text-white")
  - ctaDescription: CTA description text (optional, default: provided default text)
  - ctaDescriptionColor: CTA description color (optional, default: "text-gray-400")
  - ctaButtonText: CTA button text (optional, default: "Get started")
  - ctaButtonUrl: CTA button URL (optional, default: "#")
  - ctaButtonBgColor: CTA button background color (optional, default: "bg-indigo-500")
  - ctaButtonHoverBgColor: CTA button hover background color (optional, default: "bg-indigo-400")
  - ctaButtonTextColor: CTA button text color (optional, default: "text-white")
  - logoUrl: URL to logo image (optional, default: Tailwind CSS logo)
  - logoHeight: Logo height (optional, default: "h-9")
  - logoAlt: Logo alt text (optional, default: "Company name")
  - column1Title through column4Title: Column heading texts (optional, defaults provided)
  - column1Links through column4Links: Arrays of link objects for each column (optional, defaults provided)
  - headingColor: Column heading color (optional, default: "text-white")
  - linkColor: Link text color (optional, default: "text-gray-400")
  - linkHoverColor: Link hover color (optional, default: "text-white")
  - socialLinks: Array of social media link objects (optional, defaults provided)
  - socialLinkColor: Social link color (optional, default: "text-gray-400")
  - socialLinkHoverColor: Social link hover color (optional, default: "text-gray-300")
  - copyrightText: Copyright text (optional, default: "&copy; 2024 Your Company, Inc. All rights reserved.")
  - copyrightColor: Copyright text color (optional, default: "text-gray-400")
  - showLanguageSelector: Whether to show language selector (optional, default: true)
  - languageSelectorTitle: Language selector title (optional, default: from i18n)
  - currentPage: Current page context for language selector (optional, default: context)
@example:
  {{ partial "layout/footers/4-column_with_call-to-action_on_dark.html" (dict 
      "logoUrl" "/images/logo-white.svg"
      "logoAlt" "Acme Corp"
      "ctaHeading" "Ready to transform your business?"
      "ctaButtonText" "Start Your Free Trial"
      "ctaButtonUrl" "/signup"
      "copyrightText" (printf "&copy; %d Acme Corporation" now.Year)
  ) }}
@note: This component provides a comprehensive footer with highly customizable styling options and defaults that work well out of the box.
*/}}

{{/* Configurable variables */}}
{{ $bgColor := .bgColor | default "bg-gray-900" }}
{{ $borderColor := .borderColor | default "border-white/10" }}

{{ $hasMultipleLanguages := gt (len site.Home.AllTranslations) 1 }}
{{ $currentPage := .currentPage | default . }}

{{/* CTA Section */}}
{{ $ctaTagline := .ctaTagline | default "Get started" }}
{{ $ctaTaglineColor := .ctaTaglineColor | default "text-indigo-400" }}
{{ $ctaHeading := .ctaHeading | default "Boost your productivity. Start using our app today." }}
{{ $ctaHeadingColor := .ctaHeadingColor | default "text-white" }}
{{ $ctaDescription := .ctaDescription | default "Incididunt sint fugiat pariatur cupidatat consectetur sit cillum anim id veniam aliqua proident commodo do ea." }}
{{ $ctaDescriptionColor := .ctaDescriptionColor | default "text-gray-400" }}
{{ $ctaButtonText := .ctaButtonText | default "Get started" }}
{{ $ctaButtonUrl := .ctaButtonUrl | default "#" }}
{{ $ctaButtonBgColor := .ctaButtonBgColor | default "bg-indigo-600" }}
{{ $ctaButtonHoverBgColor := .ctaButtonHoverBgColor | default "bg-indigo-500" }}
{{ $ctaButtonTextColor := .ctaButtonTextColor | default "text-white" }}

{{/* Logo */}}
{{ $logoUrl := .logoUrl | default "https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=500" }}
{{ $logoUrl = partial "functions/get-localized-image.html" $logoUrl }}
{{ $logoHeight := .logoHeight | default "h-9" }}
{{ $logoAlt := .logoAlt | default "Company name" }}

{{/* Navigation columns */}}
{{ $column1Title := .column1Title }}
{{ $column1Links := .column1Links }}

{{ $column2Title := .column2Title }}
{{ $column2Links := .column2Links }}

{{ $column3Title := .column3Title }}
{{ $column3Links := .column3Links }}

{{ $column4Title := .column4Title }}
{{ $column4Links := .column4Links }}

{{ $headingColor := .headingColor | default "text-white" }}
{{ $linkColor := .linkColor | default "text-gray-300" }}
{{ $linkHoverColor := .linkHoverColor | default "text-white" }}

{{/* Social links */}}
{{ $socialLinks := .socialLinks | default (slice 
  (dict "name" "Facebook" "url" "#" "icon" "facebook")
  (dict "name" "Instagram" "url" "#" "icon" "instagram")
  (dict "name" "X" "url" "#" "icon" "x")
  (dict "name" "GitHub" "url" "#" "icon" "github")
  (dict "name" "LinkedIn" "url" "#" "icon" "linkedin")
  (dict "name" "YouTube" "url" "#" "icon" "youtube")
) }}
{{ $socialLinkColor := .socialLinkColor | default "text-gray-400" }}
{{ $socialLinkHoverColor := .socialLinkHoverColor | default "text-gray-300" }}

{{/* Copyright */}}
{{ $copyrightText := .copyrightText | default "&copy; 2024 Your Company, Inc. All rights reserved." }}
{{ $copyrightColor := .copyrightColor | default "text-gray-300" }}

{{ $showLanguageSelector := .showLanguageSelector | default true }}
{{ $languageSelectorTitle := .languageSelectorTitle | default (i18n "language_selector_title") }}

<footer style="background-color: #000000;">
  <!-- CTA Section - Full Width, No Margins -->
  <div id="cta-curves-container" style="
    position: relative;
    background: #000000;
    padding: 4rem 2rem;
    overflow: hidden;
  ">
    <!-- SVG Flowing Curves with Mouse Interaction -->
    <svg id="cta-curves-svg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; opacity: 0.7;" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="curveGrad1" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:rgba(99, 102, 241, 0); stop-opacity:0" />
          <stop offset="50%" style="stop-color:rgba(99, 102, 241, 0.9); stop-opacity:1" />
          <stop offset="100%" style="stop-color:rgba(99, 102, 241, 0); stop-opacity:0" />
        </linearGradient>
        <linearGradient id="curveGrad2" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:rgba(139, 92, 246, 0); stop-opacity:0" />
          <stop offset="50%" style="stop-color:rgba(139, 92, 246, 0.8); stop-opacity:1" />
          <stop offset="100%" style="stop-color:rgba(139, 92, 246, 0); stop-opacity:0" />
        </linearGradient>
        <linearGradient id="curveGrad3" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:rgba(59, 130, 246, 0); stop-opacity:0" />
          <stop offset="50%" style="stop-color:rgba(59, 130, 246, 0.7); stop-opacity:1" />
          <stop offset="100%" style="stop-color:rgba(59, 130, 246, 0); stop-opacity:0" />
        </linearGradient>
      </defs>
      
      <!-- 15 animated curves -->
      <path class="curve" data-speed="0.8" stroke="url(#curveGrad1)" stroke-width="2" fill="none" />
      <path class="curve" data-speed="1.2" stroke="url(#curveGrad2)" stroke-width="2.5" fill="none" opacity="0.8" />
      <path class="curve" data-speed="0.6" stroke="url(#curveGrad3)" stroke-width="1.5" fill="none" opacity="0.6" />
      <path class="curve" data-speed="1.5" stroke="url(#curveGrad1)" stroke-width="2" fill="none" opacity="0.7" />
      <path class="curve" data-speed="0.9" stroke="url(#curveGrad2)" stroke-width="3" fill="none" opacity="0.5" />
      <path class="curve" data-speed="1.3" stroke="url(#curveGrad3)" stroke-width="1.8" fill="none" opacity="0.9" />
      <path class="curve" data-speed="0.7" stroke="url(#curveGrad1)" stroke-width="2.2" fill="none" opacity="0.6" />
      <path class="curve" data-speed="1.1" stroke="url(#curveGrad2)" stroke-width="2" fill="none" opacity="0.8" />
      <path class="curve" data-speed="1.4" stroke="url(#curveGrad3)" stroke-width="2.5" fill="none" opacity="0.5" />
      <path class="curve" data-speed="0.85" stroke="url(#curveGrad1)" stroke-width="1.5" fill="none" opacity="0.7" />
      <path class="curve" data-speed="1.0" stroke="url(#curveGrad2)" stroke-width="2.8" fill="none" opacity="0.6" />
      <path class="curve" data-speed="1.25" stroke="url(#curveGrad3)" stroke-width="2" fill="none" opacity="0.8" />
      <path class="curve" data-speed="0.95" stroke="url(#curveGrad1)" stroke-width="2.3" fill="none" opacity="0.5" />
      <path class="curve" data-speed="1.35" stroke="url(#curveGrad2)" stroke-width="1.7" fill="none" opacity="0.9" />
      <path class="curve" data-speed="0.75" stroke="url(#curveGrad3)" stroke-width="2.5" fill="none" opacity="0.7" />
    </svg>
    
    <!-- Corner accent lines -->
    <div style="position: absolute; top: 0; left: 0; width: 50px; height: 50px; border-left: 2px solid rgba(99, 102, 241, 0.3); border-top: 2px solid rgba(99, 102, 241, 0.3);"></div>
    <div style="position: absolute; top: 0; right: 0; width: 50px; height: 50px; border-right: 2px solid rgba(99, 102, 241, 0.3); border-top: 2px solid rgba(99, 102, 241, 0.3);"></div>
    <div style="position: absolute; bottom: 0; left: 0; width: 50px; height: 50px; border-left: 2px solid rgba(99, 102, 241, 0.3); border-bottom: 2px solid rgba(99, 102, 241, 0.3);"></div>
    <div style="position: absolute; bottom: 0; right: 0; width: 50px; height: 50px; border-right: 2px solid rgba(99, 102, 241, 0.3); border-bottom: 2px solid rgba(99, 102, 241, 0.3);"></div>
    
    <div class="mx-auto max-w-2xl text-center" style="position: relative; z-index: 10;">
      <h2 class="text-base/7 font-semibold {{ $ctaTaglineColor }}">{{ $ctaTagline }}</h2>
      <p class="mt-2 text-4xl font-semibold tracking-tight text-balance {{ $ctaHeadingColor }} sm:text-5xl">{{ $ctaHeading }}</p>
      <p class="mx-auto mt-6 max-w-xl text-lg/8 text-pretty {{ $ctaDescriptionColor }}">{{ $ctaDescription }}</p>
      <div class="mt-8 flex justify-center">
        <a href="{{ partial "helpers/get-translated-url.html" (dict "url" $ctaButtonUrl) }}" class="rounded-md {{ $ctaButtonBgColor }} px-3.5 py-2.5 text-sm font-semibold {{ $ctaButtonTextColor }} shadow-xs hover:{{ $ctaButtonHoverBgColor }} focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-400">{{ $ctaButtonText }}</a>
      </div>
    </div>
  </div>
  
  <script>
  (function() {
    'use strict';
    
    const container = document.getElementById('cta-curves-container');
    const svg = document.getElementById('cta-curves-svg');
    if (!container || !svg) return;
    
    const curves = svg.querySelectorAll('.curve');
    let mouseX = 0;
    let mouseY = 0;
    let targetMouseX = 0;
    let targetMouseY = 0;
    const mouseInfluence = 150;
    const mouseStrength = 80;
    
    const curveData = Array.from(curves).map((curve, i) => {
      const speed = parseFloat(curve.getAttribute('data-speed')) || 1;
      return {
        element: curve,
        baseY: 50 + (i * 25),
        offset: Math.random() * Math.PI * 2,
        speed: speed,
        amplitude: 30 + Math.random() * 40
      };
    });
    
    container.addEventListener('mousemove', (e) => {
      const rect = container.getBoundingClientRect();
      targetMouseX = e.clientX - rect.left;
      targetMouseY = e.clientY - rect.top;
    });
    
    container.addEventListener('mouseleave', () => {
      targetMouseX = -1000;
      targetMouseY = -1000;
    });
    
    let time = 0;
    
    function animate() {
      time += 0.01;
      
      mouseX += (targetMouseX - mouseX) * 0.15;
      mouseY += (targetMouseY - mouseY) * 0.15;
      
      const width = svg.clientWidth;
      const height = svg.clientHeight;
      
      curveData.forEach((data, index) => {
        const { baseY, offset, speed, amplitude } = data;
        const phase = time * speed + offset;
        
        let path = `M -200,${baseY}`;
        
        for (let x = -200; x <= width + 200; x += 50) {
          const normalY = baseY + Math.sin((x * 0.005) + phase) * amplitude;
          
          const dx = x - mouseX;
          const dy = normalY - mouseY;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          let y = normalY;
          if (distance < mouseInfluence) {
            const influence = (1 - distance / mouseInfluence);
            const pushY = (normalY - mouseY) * influence * mouseStrength * 0.01;
            y = normalY + pushY;
          }
          
          const nextX = x + 50;
          const controlX = x + 25;
          const controlY = y;
          path += ` Q ${controlX},${controlY} ${nextX},${y}`;
        }
        
        data.element.setAttribute('d', path);
      });
      
      requestAnimationFrame(animate);
    }
    
    animate();
  })();
  </script>
  
  <!-- News Section - お知らせ欄（白背景） -->
  {{ if $currentPage.IsHome }}
  {{ partial "sections/news/home-news-list.html" (dict "page" $currentPage "limit" 5) }}
  {{ end }}
  
  <div class="mx-auto max-w-7xl px-6 py-8 sm:py-12 lg:px-8">
{{/* Company Info */}}
{{ $companyDescription := .companyDescription | default "" }}
{{ $ismsLogoUrl := .ismsLogoUrl | default "" }}
{{ $ismsLogoUrl = partial "functions/get-localized-image.html" $ismsLogoUrl }}
{{ $ismsText := .ismsText | default "" }}

    <div class="border-t {{ $borderColor }} pt-8 xl:grid xl:grid-cols-4 xl:gap-8">
      <div class="xl:col-span-1">
        {{ partial "components/media/lazyimg.html" (dict 
          "src" $logoUrl 
          "alt" $logoAlt
          "class" $logoHeight
          "maxWidth" 200
        ) }}
        {{ if $companyDescription }}
        <p class="mt-4 text-sm/6 text-gray-400">{{ $companyDescription }}</p>
        {{ end }}
        {{ if and $ismsLogoUrl $ismsText }}
        <div class="mt-6 flex items-start gap-3">
          <img src="{{ $ismsLogoUrl }}" alt="ISMS認証" class="h-16 w-auto" width="64" height="64" />
          <p class="text-xs text-gray-400 leading-relaxed">{{ $ismsText | safeHTML }}</p>
        </div>
        {{ end }}
      </div>
      <div class="mt-16 grid grid-cols-2 gap-6 md:grid-cols-4 xl:col-span-3 xl:mt-0">
          {{ if $column1Title }}
          <div class="min-w-0">
            <h3 class="text-xs font-semibold {{ $headingColor }} whitespace-nowrap">{{ $column1Title }}</h3>
            <ul role="list" class="mt-6 space-y-4">
              {{ range $column1Links }}
              <li>
                <a href="{{ partial "helpers/get-translated-url.html" (dict "url" .url) }}" class="text-sm/6 {{ $linkColor }} hover:{{ $linkHoverColor }}">{{ .text }}</a>
              </li>
              {{ end }}
            </ul>
          </div>
          {{ end }}
          {{ if $column2Title }}
          <div class="min-w-0">
            <h3 class="text-xs font-semibold {{ $headingColor }} whitespace-nowrap">{{ $column2Title }}</h3>
            <ul role="list" class="mt-6 space-y-4">
              {{ range $column2Links }}
              <li>
                <a href="{{ partial "helpers/get-translated-url.html" (dict "url" .url) }}" class="text-sm/6 {{ $linkColor }} hover:{{ $linkHoverColor }}">{{ .text }}</a>
              </li>
              {{ end }}
            </ul>
          </div>
          {{ end }}
        
          {{ if $column3Title }}
          <div class="min-w-0">
            <h3 class="text-xs font-semibold {{ $headingColor }} whitespace-nowrap">{{ $column3Title }}</h3>
            <ul role="list" class="mt-6 space-y-4">
              {{ range $column3Links }}
              <li>
                <a href="{{ partial "helpers/get-translated-url.html" (dict "url" .url) }}" class="text-sm/6 {{ $linkColor }} hover:{{ $linkHoverColor }}">{{ .text }}</a>
              </li>
              {{ end }}
            </ul>
          </div>
          {{ end }}
          {{ if $column4Title }}
          <div class="min-w-0">
            <h3 class="text-xs font-semibold {{ $headingColor }} whitespace-nowrap">{{ $column4Title }}</h3>
            <ul role="list" class="mt-6 space-y-4">
              {{ range $column4Links }}
              <li>
                <a href="{{ partial "helpers/get-translated-url.html" (dict "url" .url) }}" class="text-sm/6 {{ $linkColor }} hover:{{ $linkHoverColor }}">{{ .text }}</a>
              </li>
              {{ end }}
            </ul>
          </div>
          {{ end }}
      </div>
    </div>
    <div class="language-selector mt-12 border-t {{ $borderColor }} pt-8 md:flex md:items-center md:justify-between">
      <div>
        <p class="text-sm/6 font-semibold {{ $headingColor }} mb-4">{{ $languageSelectorTitle }}</p>
        {{ if $currentPage }}
          {{ partial "components/navigation/language-selector.html" $currentPage }}
        {{ else }}
          {{ partial "components/navigation/language-selector.html" . }}
        {{ end }}
      </div>
    </div>
    <div class="mt-12 border-t {{ $borderColor }} pt-8 md:flex md:items-center md:justify-between">
      <div class="flex gap-x-6 md:order-2">
        {{ range $socialLinks }}
        <a href="{{ partial "helpers/get-translated-url.html" (dict "url" .url) }}" class="{{ $socialLinkColor }} hover:{{ $socialLinkHoverColor }}">
          <span class="sr-only">{{ .name }}</span>
          {{ partial "components/media/icon.html" (dict "icon" .icon) }}
        </a>
        {{ end }}
      </div>
      <p class="mt-8 text-sm/6 {{ $copyrightColor }} md:mt-0" style="text-align: center; animation: copyrightGlow 3s ease-in-out infinite;">{{ $copyrightText | safeHTML }}</p>
    </div>
  </div>
  
  <style>
    @keyframes copyrightGlow {
      0%, 100% {
        opacity: 0.6;
        text-shadow: 0 0 10px rgba(99, 102, 241, 0);
      }
      50% {
        opacity: 1;
        text-shadow: 0 0 20px rgba(99, 102, 241, 0.5), 0 0 30px rgba(99, 102, 241, 0.3);
      }
    }
  </style>
</footer>
