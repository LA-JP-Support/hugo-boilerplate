<meta name="referrer" content="strict-origin-when-cross-origin">
<meta charset="utf-8">
<meta name="viewport" content="minimum-scale=1, width=device-width, initial-scale=1.0, shrink-to-fit=no">
{{ if .Params.private }}
<meta name="robots" content="noindex, nofollow">
{{ end }}

<title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}</title>
{{ with .Permalink }}<link rel="canonical" href="{{ . }}">{{ end }}

<!-- Favicon -->
<link rel="icon" type="image/png" sizes="32x32" href="/images/faivicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/faivicon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/faivicon.png">
<link rel="shortcut icon" href="/images/faivicon.png">

<!-- Generate hreflang alternate links -->
{{ ( partialCached "helpers/generate-hreflang-links.html" (dict "currentPage" . "defaultLang" "en") .Permalink ) | safeHTML }}
{{ partial "social-meta.html" . | safeHTML }}
{{ partialCached "head/variables.html" . }}
<!-- Preload fonts early -->
<link rel="preload" href="/fonts/inter/Inter-VariableFont_opsz,wght.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<!-- Google Fonts - Async loading to prevent render blocking -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Serif+JP:wght@500;700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Serif+JP:wght@500;700&display=swap" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Serif+JP:wght@500;700&display=swap"></noscript>
<!-- Critical CSS - Font fallback and initial layout -->
<style>
/* Font fallback system - prevents FOIT */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 100 900;
  font-display: swap;
  src: url('/fonts/inter/Inter-VariableFont_opsz,wght.woff2') format('woff2');
}
/* Fallback fonts while web fonts load */
.font-sans { font-family: Inter, 'Noto Sans JP', system-ui, -apple-system, sans-serif; }
.font-serif, .font-mincho { font-family: 'Noto Serif JP', Georgia, 'Times New Roman', serif; }
/* Critical layout - prevent CLS */
html { scroll-behavior: smooth; }
body { margin: 0; -webkit-font-smoothing: antialiased; }
.antialiased { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
/* Hero section critical styles */
.antigravity-hero { min-height: 50vh; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }
.wrapper { width: 100%; max-width: 80rem; margin: 0 auto; padding: 0 1.5rem; }
</style>
<!-- Classic CSS loading for immediate styling -->
<link rel="stylesheet" href="/css/main.css?v={{ partialCached "helpers/build-timestamp.html" . }}" crossorigin="anonymous">
<!-- Custom CSS for code blocks and blockquotes -->
<link rel="stylesheet" href="/css/custom-code-blockquote.css?v={{ partialCached "helpers/build-timestamp.html" . }}" crossorigin="anonymous">
<!-- KaTeX for math rendering -->
{{ partial "head/katex.html" . }}
<!-- Critical theme JS - loaded early with defer -->
<script src="/js/main.js?v={{ partialCached "helpers/build-timestamp.html" . }}" defer></script>
{{ partialCached "utils/analytics/google-analytics-consent.html" . }}
<!-- Tracking Scripts -->
{{ if templates.Exists "partials/tracking/tracking-scripts.html" }}
  {{ partial "tracking/tracking-scripts.html" . }}
{{ end }}
