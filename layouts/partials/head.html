<meta name="referrer" content="strict-origin-when-cross-origin">
<meta charset="utf-8">
<meta name="viewport" content="minimum-scale=1, width=device-width, initial-scale=1.0, shrink-to-fit=no">
{{ if or .Params.private (not hugo.IsProduction) }}
<meta name="robots" content="noindex, nofollow">
{{ end }}

<title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}</title>
{{ with .Permalink }}<link rel="canonical" href="{{ . }}">{{ end }}

<!-- Favicon -->
<link rel="icon" type="image/png" sizes="32x32" href="/images/faivicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/faivicon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/faivicon.png">
<link rel="shortcut icon" href="/images/faivicon.png">

<!-- Generate hreflang alternate links -->
{{ ( partialCached "helpers/generate-hreflang-links.html" (dict "currentPage" . "defaultLang" "en") .Permalink ) | safeHTML }}
{{ partial "social-meta.html" . | safeHTML }}
{{ partialCached "head/variables.html" . }}
<!-- Preload fonts early -->
<link rel="preload" href="/fonts/inter/Inter-VariableFont_opsz,wght.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<!-- Google Fonts removed for performance - using system fonts only -->
<!-- Critical CSS - Font fallback and initial layout -->
<style>
/* Font fallback system - prevents FOIT */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 100 900;
  font-display: swap;
  src: url('/fonts/inter/Inter-VariableFont_opsz,wght.woff2') format('woff2');
}
/* System font stack for immediate LCP - Japanese fallback optimized */
.font-sans { font-family: Inter, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Yu Gothic', Meiryo, system-ui, -apple-system, sans-serif; }
.font-serif, .font-mincho { font-family: 'Hiragino Mincho ProN', 'Yu Mincho', 'MS PMincho', Georgia, 'Times New Roman', serif; }
/* Critical layout - prevent CLS */
html { scroll-behavior: smooth; }
body { margin: 0; -webkit-font-smoothing: antialiased; background-color: #fff; color: #1f2937; }
.antialiased { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
/* Header critical styles */
header.bg-white { position: sticky !important; top: 0; z-index: 1000; background-color: #fff; }
.bg-white { background-color: #fff; }
.text-white { color: #fff; }
.text-gray-900 { color: #111827; }
/* Main content - prevent CLS */
main.w-full { min-height: 100vh; }
/* Hero section critical styles - LCP optimization */
.antigravity-hero { min-height: 600px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background-color: #0f172a; }
@media (max-width: 640px) { .antigravity-hero { min-height: 500px; } }
/* Hero carousel - fixed height prevents CLS on slide change */
.hero-carousel { position: relative; width: 100%; height: 280px; }
.hero-slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; visibility: hidden; z-index: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
.hero-slide:first-child { opacity: 1; visibility: visible; z-index: 1; }
.hero-slide.active { opacity: 1; visibility: visible; z-index: 2; }
/* Hero text sizing - prevent font CLS */
.hero-slide h1, .hero-content h1 { font-size: 3rem; line-height: 1.1; }
@media (min-width: 640px) { 
  .hero-carousel { height: 340px; } 
  .hero-slide h1, .hero-content h1 { font-size: 4.5rem; }
}
.wrapper { width: 100%; max-width: 80rem; margin: 0 auto; padding: 0 1.5rem; }
/* LCP element - System serif fonts only (NO Noto Serif JP) for instant rendering */
.hero-content h1, .hero-slide h1 { 
  font-family: 'Hiragino Mincho ProN', 'Yu Mincho', 'MS PMincho', Georgia, 'Times New Roman', serif !important;
  font-weight: 700;
  color: #fff;
}
/* Tailwind critical utilities - layout */
.relative { position: relative; }
.absolute { position: absolute; }
.flex { display: flex; }
.hidden { display: none; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.text-center { text-align: center; }
.font-bold { font-weight: 700; }
.font-semibold { font-weight: 600; }
.overflow-hidden { overflow: hidden; }
/* Critical max-width / container - prevents FOUC width flash */
.max-w-7xl { max-width: 80rem; }
.max-w-4xl { max-width: 56rem; }
.max-w-3xl { max-width: 48rem; }
.max-w-2xl { max-width: 42rem; }
.max-w-xl { max-width: 36rem; }
.mx-auto { margin-left: auto; margin-right: auto; }
.px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
.p-6 { padding: 1.5rem; }
.gap-x-6 { column-gap: 1.5rem; }
.w-full { width: 100%; }
@media (min-width: 1024px) { .lg\:px-8 { padding-left: 2rem; padding-right: 2rem; } .lg\:flex-1 { flex: 1 1 0%; } .lg\:flex { display: flex; } .lg\:gap-x-12 { column-gap: 3rem; } }
nav { display: flex; }

.w-3\.5 { width: 0.875rem; }
.h-3\.5 { height: 0.875rem; }
.w-4 { width: 1rem; }
.h-4 { height: 1rem; }
.w-5 { width: 1.25rem; }
.h-5 { height: 1.25rem; }
.w-6 { width: 1.5rem; }
.h-6 { height: 1.5rem; }
.w-8 { width: 2rem; }
.h-8 { height: 2rem; }
.w-10 { width: 2.5rem; }
.h-10 { height: 2.5rem; }
.w-12 { width: 3rem; }
.h-12 { height: 3rem; }
.w-16 { width: 4rem; }
.h-16 { height: 4rem; }
.size-4 { width: 1rem; height: 1rem; }
.size-5 { width: 1.25rem; height: 1.25rem; }
.size-6 { width: 1.5rem; height: 1.5rem; }
/* Mobile-specific optimizations */
@media (max-width: 768px) {
  .hero-content h1, .hero-slide h1 { font-size: 1.875rem; line-height: 1.2; }
  .md\:flex { display: none; }
  .md\:hidden { display: block; }
}
@media (min-width: 768px) {
  .md\:flex { display: flex; }
  .md\:hidden { display: none; }
}
</style>
<!-- Main CSS - Async loading to prevent render blocking -->
<link rel="preload" href="/css/main.css?v={{ partialCached "helpers/build-timestamp.html" . }}" as="style">
<link rel="stylesheet" href="/css/main.css?v={{ partialCached "helpers/build-timestamp.html" . }}">
<noscript><link rel="stylesheet" href="/css/main.css?v={{ partialCached "helpers/build-timestamp.html" . }}"></noscript>
<!-- Custom CSS for code blocks and blockquotes - Async -->
<link rel="stylesheet" href="/css/custom-code-blockquote.css?v={{ partialCached "helpers/build-timestamp.html" . }}">
<noscript><link rel="stylesheet" href="/css/custom-code-blockquote.css?v={{ partialCached "helpers/build-timestamp.html" . }}"></noscript>
<!-- KaTeX for math rendering -->
{{ partial "head/katex.html" . }}
<!-- Critical theme JS - loaded early with defer -->
<script src="/js/main.js?v={{ partialCached "helpers/build-timestamp.html" . }}" defer></script>
{{ partialCached "utils/analytics/google-analytics-consent.html" . }}
<!-- Tracking Scripts -->
{{ if templates.Exists "partials/tracking/tracking-scripts.html" }}
  {{ partial "tracking/tracking-scripts.html" . }}
{{ end }}
