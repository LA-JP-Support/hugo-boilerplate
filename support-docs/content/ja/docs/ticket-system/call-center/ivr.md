---
title: "IVR"
date: 2026-01-30
lastmod: 2026-01-30
draft: false
translationKey: "ivr"
description: "IVRは、YAMLスクリプトを使用して構成されます。どのように動作するかの下記例をご確認ください："
keywords: ["IVR", "エージェント", "セクション", "オンライン", "オフライン"]
category: "ticket-system/call-center"
---
## IVRの概要

IVRは、YAMLスクリプトを使用して構成されます。**⇒「設定」-「通話」-「番号」～使用する番号の「編集」-「IVR」**

### IVRの基本セクション

IVRには3つの必須セクションがあります：

#### オフラインセクション
- オンラインのエージェントがいないときに使用されます。

#### オンラインセクション
- オンラインのエージェントがいるときに使用されます。

#### キューセクション
- 呼び出し側（顧客）がキュー内で待機する必要があるときに使用されます。

## 基本的なIVR設定の例

```yaml
offline:
  - play: http://offline.message
  - voicemail
online:
  - play: http://welcome.message
  - ring
queue:
  - play: http://in.queue.music
```

### IVRの動作フロー
1. オンラインのエージェントがいない場合：
   - オフラインアナウンスが再生され、ボイスメールが記録されます。

2. エージェントがオンラインになると：
   - ウェルカムメッセージが再生され、最初に対応可能なエージェントに通話が転送されます。

3. すべてのエージェントが占有されている場合：
   - コールはキューに入れられ、キュー音楽が再生されます。

## 高度なIVR設定の例

### スタートセクションの詳細
- ウェルカムメッセージの再生
- 部門選択オプション
- ユーザ入力に応じた転送

### 部門選択の動作
#### 営業部門（1を選択）
- オンライン時：営業部門にメッセージと通話転送
- オフライン時：ボイスメールに転送

#### 技術部門（2を選択）
- オンライン時：技術部門に通話転送
- オフライン時：オフラインセクションに移動

### キューオプション
- キュー音楽の再生
- 待機または別のアクション（ボイスメール）の選択

## ダイナミックIVR

### 動的IVRスクリプトの生成
- fetchコマンドを使用
- 呼び出し元の情報に基づいてスクリプトを動的に生成

### パラメータ渡しの例
- 発信元番号
- 宛先番号
- 会話コード

## 注意点

### IVRスクリプトの選択オプション
- 開始セクションでの選択
- キューセクションでの選択