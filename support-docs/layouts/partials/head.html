<head>
    <meta charset="utf-8" />
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    {{- if not hugo.IsProduction }}
    <meta name="robots" content="noindex">
    {{- end }}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}" />
    <meta name="author" content="SmartWeb" />
    
    <!-- Hreflang tags for multilingual SEO -->
    {{ if .IsTranslated }}
      {{ range .Translations }}
      <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}" />
      {{ end }}
      <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}" />
    {{ end }}
    <link rel="alternate" hreflang="x-default" href="{{ .Site.BaseURL }}" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ .Permalink }}" />
    
    <!-- favicon -->
    {{ block "head/favicon" . }}{{ partialCached "head/favicon.html" . }}{{ end }}
    <!-- Google Fonts -->
    {{- partial "google-fonts" . }}
    <!-- Custom CSS -->
    {{- $options := dict "enableSourceMap" true }}
    {{- if hugo.IsProduction}}
        {{- $options := dict "enableSourceMap" false "outputStyle" "compressed" }}
    {{- end }}
    {{- $style := resources.Get "/scss/style.scss" }}
    {{- $style = $style | resources.ExecuteAsTemplate "/scss/style.scss" . | css.Sass $options }}
    {{- if hugo.IsProduction }}
        {{- $style = $style | minify | fingerprint "sha384" }}
    {{- end -}}
    <link rel="stylesheet" href="{{ $style.RelPermalink }}" {{ if hugo.IsProduction }}integrity="{{ $style.Data.Integrity }}"{{ end -}}/>
    
    <!-- Critical CSS for SmartWeb Support -->
    <style>
    /* Article title (h1) - balanced size */
    body .docs-content h1, body article h1, body .content h1, body main h1, body h1 {
        margin-bottom: 2rem !important;
        font-size: 1.5rem !important;
        line-height: 1.5 !important;
        font-weight: 600 !important;
    }
    /* Subtitle h2 - balanced size */
    body .docs-content h2, body article h2, body .content h2, body main h2, body h2 {
        font-size: 1.3rem !important;
        line-height: 1.5 !important;
        font-weight: 600 !important;
    }
    /* Subtitle h3 - balanced size */
    body .docs-content h3, body article h3, body .content h3, body main h3, body h3 {
        font-size: 1.15rem !important;
        line-height: 1.5 !important;
        font-weight: 600 !important;
    }
    /* Subtitle h4 - balanced size */
    body .docs-content h4, body article h4, body .content h4, body main h4, body h4 {
        font-size: 1.05rem !important;
        line-height: 1.5 !important;
        font-weight: 600 !important;
    }
    /* Pagination links (doc-nav) - reduce font size */
    #doc-nav .card-title.fs-5 { font-size: 0.9rem !important; }
    #doc-nav .card-text { font-size: 0.85rem !important; }
    </style>
    
    <!-- Bootstrap JS -->
    {{ $js := resources.Get "js/bootstrap.js" }}
    {{ $params := dict }}
    {{ $sourceMap := cond hugo.IsProduction "" "inline" }}
    {{ $opts := dict "sourceMap" $sourceMap "minify" hugo.IsProduction "target" "es2018" "params" $params }}
    {{ $js = $js | js.Build $opts }}
    {{ if hugo.IsProduction }}
        {{ $js = $js | fingerprint "sha384" }}
    {{ end }}
        <script src="{{ $js.RelPermalink }}" {{ if hugo.IsProduction }}integrity="{{ $js.Data.Integrity }}"{{ end -}} defer></script>
    <!-- Image Compare Viewer -->
    {{ if ($.Scratch.Get "image_compare_enabled") }}
        {{ $imagecompare := resources.Get "js/image-compare-viewer.min.js" }}
        {{- if not hugo.IsServer }}
            {{- $js := (slice $imagecompare) | resources.Concat "/js/image-compare.js" | minify | fingerprint "sha384" }}
            <script type="text/javascript" src="{{ $js.Permalink }}" integrity="{{ $js.Data.Integrity }}"></script>
        {{- else }}
            {{- $js := (slice $imagecompare) | resources.Concat "/js/image-compare.js" }}
            <script type="text/javascript" src="{{ $js.Permalink }}" {{ if hugo.IsProduction }}integrity="{{ $js.Data.Integrity }}"{{ end }}></script>
        {{- end }}
    {{- end }}
    <!-- Plausible Analytics Config -->
    {{- if not hugo.IsServer }}
    {{ if and (.Site.Params.plausible.scriptURL) (.Site.Params.plausible.dataDomain) -}}
        {{- partialCached "head/plausible" . }}
    {{- end -}}
    {{- end -}}
    <!-- Google Analytics v4 Config -->
    {{- if not hugo.IsServer }}
    {{- if .Site.Config.Services.GoogleAnalytics.ID }}
        {{- template "_internal/google_analytics.html" . -}}
    {{- end -}}
    {{- end -}}
</head>
